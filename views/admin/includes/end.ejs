<!-- jQuery 3 -->
<script src="/admin/bower_components/jquery/dist/jquery.min.js"></script>
<!-- jQuery UI 1.11.4 -->
<script src="/admin/bower_components/jquery-ui/jquery-ui.min.js"></script>
<!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
<script>
  $.widget.bridge('uibutton', $.ui.button);
</script>
<!-- Bootstrap 3.3.7 -->
<script src="/admin/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
<!-- Morris.js charts -->
<script src="/admin/bower_components/raphael/raphael.min.js"></script>
<script src="/admin/bower_components/morris.js/morris.min.js"></script>
<!-- Sparkline -->
<script src="/admin/bower_components/jquery-sparkline/dist/jquery.sparkline.min.js"></script>
<!-- jvectormap -->
<script src="/admin/plugins/jvectormap/jquery-jvectormap-1.2.2.min.js"></script>
<script src="/admin/plugins/jvectormap/jquery-jvectormap-world-mill-en.js"></script>
<!-- jQuery Knob Chart -->
<script src="/admin/bower_components/jquery-knob/dist/jquery.knob.min.js"></script>
<!-- daterangepicker -->
<script src="/admin/bower_components/moment/min/moment.min.js"></script>
<script src="/admin/bower_components/bootstrap-daterangepicker/daterangepicker.js"></script>
<!-- datepicker -->
<script src="/admin/bower_components/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js"></script>
<!-- Bootstrap WYSIHTML5 -->
<script src="/admin/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.all.min.js"></script>
<!-- Slimscroll -->
<script src="/admin/bower_components/jquery-slimscroll/jquery.slimscroll.min.js"></script>
<!-- FastClick -->
<script src="/admin/bower_components/fastclick/lib/fastclick.js"></script>
<!-- AdminLTE App -->
<script src="/admin/dist/js/adminlte.min.js"></script>
<!-- AdminLTE dashboard demo (This is only for demo purposes) -->
<!-- <script src="/admin/dist/js/pages/dashboard.js"></script> -->
<!-- AdminLTE for demo purposes -->
<script src="/admin/dist/js/demo.js"></script>

<!-- add these only if toastr is not already loaded -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>

<script>
document.addEventListener('DOMContentLoaded', function () {
  const params = new URLSearchParams(window.location.search);
  const rawMessage = params.get('message');
  if (!rawMessage) return;

  // determine type: error flag or explicit type
  const isError = params.get('error') === 'true' || params.get('error') === '1';
  const type = isError ? 'error' : (params.get('type') || 'success');

  // simple html escape to avoid XSS
  function escapeHtml(s) {
    return String(s).replace(/[&<>"']/g, function (m) {
      return { '&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;', "'": '&#39;' }[m];
    });
  }

  toastr.options = {
    closeButton: true,
    progressBar: true,
    positionClass: 'toast-bottom-right',
    timeOut: '5000',
    extendedTimeOut: '1000'
  };

  const message = decodeURIComponent(rawMessage.replace(/\+/g, ' '));
  toastr[type](escapeHtml(message));

  // remove query params to avoid re-show on refresh
  const url = new URL(window.location);
  url.searchParams.delete('message');
  url.searchParams.delete('error');
  url.searchParams.delete('type');
  window.history.replaceState({}, document.title, url.pathname + url.search);
});
</script>

<!-- loader script -->
 <script>
  // Show loader when any form is submitted
  $('form').on('submit', function() {
    $('#loading-overlay').fadeIn(200);
  });

  // Hide loader when modals close (optional)
  $('.modal').on('hidden.bs.modal', function() {
    $('#loading-overlay').fadeOut(200);
  });

  // Optional: also show loader for AJAX requests
  $(document).ajaxStart(function() {
    $('#loading-overlay').fadeIn(200);
  }).ajaxStop(function() {
    $('#loading-overlay').fadeOut(200);
  });
</script>
